import{E as ls,V as D,M as _e,T as ge,Q as Ve,S as Xt,a as B,b as us,c as ht,d as _n,L as St,e as pt,F as Pe,C as de,f as ds,P as X,D as fs,g as le,s as xe,h as Z,I as hs,O as gn,i as ze,j as ps,B as Oe,k as ms,l as bn,m as yn,R as mt,n as _s,o as rt,p as gs,q as Ke,r as wn,t as bs,u as En,v as ys,w as Xe,x as ws,y as Es,z as xs,A as Ts,G as at,H as xn,J as vs,K as As,N as Ss,U as Tn,W as vn,X as Ls,Y as Ye,Z as _t,_ as Cs,$ as Rs,a0 as Os,a1 as ks,a2 as Ms,a3 as Ns,a4 as Ps,a5 as Is,a6 as Yt,a7 as Ds,a8 as Wt,a9 as Fs,aa as Hs,ab as Bs,ac as Us,ad as js,ae as Gs,af as Vs,ag as zs,ah as Ks,ai as Xs,aj as Ys,ak as Ws,al as Be,am as qs,an as $s,ao as Js}from"./three-d4eeee37.js";import{g as x}from"./gsap-10963069.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Qs(o){if(o&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=o,document.head.appendChild(e),o}}function we(o,e){var t=o.__state.conversionName.toString(),n=Math.round(o.r),s=Math.round(o.g),i=Math.round(o.b),r=o.a,a=Math.round(o.h),c=o.s.toFixed(1),u=o.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var f=o.hex.toString(16);f.length<6;)f="0"+f;return"#"+f}else{if(t==="CSS_RGB")return"rgb("+n+","+s+","+i+")";if(t==="CSS_RGBA")return"rgba("+n+","+s+","+i+","+r+")";if(t==="HEX")return"0x"+o.hex.toString(16);if(t==="RGB_ARRAY")return"["+n+","+s+","+i+"]";if(t==="RGBA_ARRAY")return"["+n+","+s+","+i+","+r+"]";if(t==="RGB_OBJ")return"{r:"+n+",g:"+s+",b:"+i+"}";if(t==="RGBA_OBJ")return"{r:"+n+",g:"+s+",b:"+i+",a:"+r+"}";if(t==="HSV_OBJ")return"{h:"+a+",s:"+c+",v:"+u+"}";if(t==="HSVA_OBJ")return"{h:"+a+",s:"+c+",v:"+u+",a:"+r+"}"}return"unknown format"}var qt=Array.prototype.forEach,ve=Array.prototype.slice,m={BREAK:{},extend:function(e){return this.each(ve.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(s){this.isUndefined(t[s])||(e[s]=t[s])}.bind(this))},this),e},defaults:function(e){return this.each(ve.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(s){this.isUndefined(e[s])&&(e[s]=t[s])}.bind(this))},this),e},compose:function(){var e=ve.call(arguments);return function(){for(var t=ve.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e){if(qt&&e.forEach&&e.forEach===qt)e.forEach(t,n);else if(e.length===e.length+0){var s=void 0,i=void 0;for(s=0,i=e.length;s<i;s++)if(s in e&&t.call(n,e[s],s)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var s=void 0;return function(){var i=this,r=arguments;function a(){s=null,n||e.apply(i,r)}var c=n||!s;clearTimeout(s),s=setTimeout(a,t),c&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():ve.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(o){function e(t){return o.apply(this,arguments)}return e.toString=function(){return o.toString()},e}(function(o){return isNaN(o)}),isArray:Array.isArray||function(o){return o.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},Zs=[{litmus:m.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:we},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:we},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:we},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:we}}},{litmus:m.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:m.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:m.isObject,conversions:{RGBA_OBJ:{read:function(e){return m.isNumber(e.r)&&m.isNumber(e.g)&&m.isNumber(e.b)&&m.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return m.isNumber(e.r)&&m.isNumber(e.g)&&m.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return m.isNumber(e.h)&&m.isNumber(e.s)&&m.isNumber(e.v)&&m.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return m.isNumber(e.h)&&m.isNumber(e.s)&&m.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Ae=void 0,Ue=void 0,gt=function(){Ue=!1;var e=arguments.length>1?m.toArray(arguments):arguments[0];return m.each(Zs,function(t){if(t.litmus(e))return m.each(t.conversions,function(n,s){if(Ae=n.read(e),Ue===!1&&Ae!==!1)return Ue=Ae,Ae.conversionName=s,Ae.conversion=n,m.BREAK}),m.BREAK}),Ue},$t=void 0,We={hsv_to_rgb:function(e,t,n){var s=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),c=n*(1-(1-i)*t),u=[[n,c,r],[a,n,r],[r,n,c],[r,a,n],[c,r,n],[n,r,a]][s];return{r:u[0]*255,g:u[1]*255,b:u[2]*255}},rgb_to_hsv:function(e,t,n){var s=Math.min(e,t,n),i=Math.max(e,t,n),r=i-s,a=void 0,c=void 0;if(i!==0)c=r/i;else return{h:NaN,s:0,v:0};return e===i?a=(t-n)/r:t===i?a=2+(n-e)/r:a=4+(e-t)/r,a/=6,a<0&&(a+=1),{h:a*360,s:c,v:i/255}},rgb_to_hex:function(e,t,n){var s=this.hex_with_component(0,2,e);return s=this.hex_with_component(s,1,t),s=this.hex_with_component(s,0,n),s},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,n){return n<<($t=t*8)|e&~(255<<$t)}},ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y=function(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")},W=function(){function o(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),oe=function o(e,t,n){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);if(s===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:o(i,t,n)}else{if("value"in s)return s.value;var r=s.get;return r===void 0?void 0:r.call(n)}},re=function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(o,e):o.__proto__=e)},ae=function(o,e){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:o},O=function(){function o(){if(Y(this,o),this.__state=gt.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return W(o,[{key:"toString",value:function(){return we(this)}},{key:"toHexString",value:function(){return we(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),o}();function Lt(o,e,t){Object.defineProperty(o,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(O.recalculateRGB(this,e,t),this.__state[e])},set:function(s){this.__state.space!=="RGB"&&(O.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=s}})}function Ct(o,e){Object.defineProperty(o,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(O.recalculateHSV(this),this.__state[e])},set:function(n){this.__state.space!=="HSV"&&(O.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=n}})}O.recalculateRGB=function(o,e,t){if(o.__state.space==="HEX")o.__state[e]=We.component_from_hex(o.__state.hex,t);else if(o.__state.space==="HSV")m.extend(o.__state,We.hsv_to_rgb(o.__state.h,o.__state.s,o.__state.v));else throw new Error("Corrupted color state")};O.recalculateHSV=function(o){var e=We.rgb_to_hsv(o.r,o.g,o.b);m.extend(o.__state,{s:e.s,v:e.v}),m.isNaN(e.h)?m.isUndefined(o.__state.h)&&(o.__state.h=0):o.__state.h=e.h};O.COMPONENTS=["r","g","b","h","s","v","hex","a"];Lt(O.prototype,"r",2);Lt(O.prototype,"g",1);Lt(O.prototype,"b",0);Ct(O.prototype,"h");Ct(O.prototype,"s");Ct(O.prototype,"v");Object.defineProperty(O.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(O.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=We.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var fe=function(){function o(e,t){Y(this,o),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return W(o,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),o}(),ti={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},An={};m.each(ti,function(o,e){m.each(o,function(t){An[t]=e})});var ni=/(\d+(\.\d+)?)px/;function q(o){if(o==="0"||m.isUndefined(o))return 0;var e=o.match(ni);return m.isNull(e)?0:parseFloat(e[1])}var p={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var s=n,i=t;m.isUndefined(i)&&(i=!0),m.isUndefined(s)&&(s=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),s&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,s){var i=n||{},r=An[t];if(!r)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(r);switch(r){case"MouseEvents":{var c=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,c,u,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var f=a.initKeyboardEvent||a.initKeyEvent;m.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),f(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break}default:{a.initEvent(t,i.bubbles||!1,i.cancelable||!0);break}}m.defaults(a,s),e.dispatchEvent(a)},bind:function(e,t,n,s){var i=s||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),p},unbind:function(e,t,n,s){var i=s||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),p},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)===-1&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return p},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),s=n.indexOf(t);s!==-1&&(n.splice(s,1),e.className=n.join(" "))}else e.className=void 0;return p},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return q(t["border-left-width"])+q(t["border-right-width"])+q(t["padding-left"])+q(t["padding-right"])+q(t.width)},getHeight:function(e){var t=getComputedStyle(e);return q(t["border-top-width"])+q(t["border-bottom-width"])+q(t["padding-top"])+q(t["padding-bottom"])+q(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Sn=function(o){re(e,o);function e(t,n){Y(this,e);var s=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=s;s.__prev=s.getValue(),s.__checkbox=document.createElement("input"),s.__checkbox.setAttribute("type","checkbox");function r(){i.setValue(!i.__prev)}return p.bind(s.__checkbox,"change",r,!1),s.domElement.appendChild(s.__checkbox),s.updateDisplay(),s}return W(e,[{key:"setValue",value:function(n){var s=oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),s}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(fe),si=function(o){re(e,o);function e(t,n,s){Y(this,e);var i=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=s,a=i;if(i.__select=document.createElement("select"),m.isArray(r)){var c={};m.each(r,function(u){c[u]=u}),r=c}return m.each(r,function(u,f){var l=document.createElement("option");l.innerHTML=f,l.setAttribute("value",u),a.__select.appendChild(l)}),i.updateDisplay(),p.bind(i.__select,"change",function(){var u=this.options[this.selectedIndex].value;a.setValue(u)}),i.domElement.appendChild(i.__select),i}return W(e,[{key:"setValue",value:function(n){var s=oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),s}},{key:"updateDisplay",value:function(){return p.isActive(this.__select)?this:(this.__select.value=this.getValue(),oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(fe),ii=function(o){re(e,o);function e(t,n){Y(this,e);var s=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=s;function r(){i.setValue(i.__input.value)}function a(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),p.bind(s.__input,"keyup",r),p.bind(s.__input,"change",r),p.bind(s.__input,"blur",a),p.bind(s.__input,"keydown",function(c){c.keyCode===13&&this.blur()}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return W(e,[{key:"updateDisplay",value:function(){return p.isActive(this.__input)||(this.__input.value=this.getValue()),oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(fe);function Jt(o){var e=o.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var Ln=function(o){re(e,o);function e(t,n,s){Y(this,e);var i=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=s||{};return i.__min=r.min,i.__max=r.max,i.__step=r.step,m.isUndefined(i.__step)?i.initialValue===0?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=Jt(i.__impliedStep),i}return W(e,[{key:"setValue",value:function(n){var s=n;return this.__min!==void 0&&s<this.__min?s=this.__min:this.__max!==void 0&&s>this.__max&&(s=this.__max),this.__step!==void 0&&s%this.__step!==0&&(s=Math.round(s/this.__step)*this.__step),oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,s)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=Jt(n),this}}]),e}(fe);function oi(o,e){var t=Math.pow(10,e);return Math.round(o*t)/t}var qe=function(o){re(e,o);function e(t,n,s){Y(this,e);var i=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,s));i.__truncationSuspended=!1;var r=i,a=void 0;function c(){var y=parseFloat(r.__input.value);m.isNaN(y)||r.setValue(y)}function u(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function f(){u()}function l(y){var g=a-y.clientY;r.setValue(r.getValue()+g*r.__impliedStep),a=y.clientY}function d(){p.unbind(window,"mousemove",l),p.unbind(window,"mouseup",d),u()}function _(y){p.bind(window,"mousemove",l),p.bind(window,"mouseup",d),a=y.clientY}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),p.bind(i.__input,"change",c),p.bind(i.__input,"blur",f),p.bind(i.__input,"mousedown",_),p.bind(i.__input,"keydown",function(y){y.keyCode===13&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,u())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return W(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():oi(this.getValue(),this.__precision),oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Ln);function Qt(o,e,t,n,s){return n+(s-n)*((o-e)/(t-e))}var bt=function(o){re(e,o);function e(t,n,s,i,r){Y(this,e);var a=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:s,max:i,step:r})),c=a;a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),p.bind(a.__background,"mousedown",u),p.bind(a.__background,"touchstart",d),p.addClass(a.__background,"slider"),p.addClass(a.__foreground,"slider-fg");function u(g){document.activeElement.blur(),p.bind(window,"mousemove",f),p.bind(window,"mouseup",l),f(g)}function f(g){g.preventDefault();var b=c.__background.getBoundingClientRect();return c.setValue(Qt(g.clientX,b.left,b.right,c.__min,c.__max)),!1}function l(){p.unbind(window,"mousemove",f),p.unbind(window,"mouseup",l),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}function d(g){g.touches.length===1&&(p.bind(window,"touchmove",_),p.bind(window,"touchend",y),_(g))}function _(g){var b=g.touches[0].clientX,w=c.__background.getBoundingClientRect();c.setValue(Qt(b,w.left,w.right,c.__min,c.__max))}function y(){p.unbind(window,"touchmove",_),p.unbind(window,"touchend",y),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}return a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return W(e,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=n*100+"%",oe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Ln),Cn=function(o){re(e,o);function e(t,n,s){Y(this,e);var i=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=s===void 0?"Fire":s,p.bind(i.__button,"click",function(a){return a.preventDefault(),r.fire(),!1}),p.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return W(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(fe),yt=function(o){re(e,o);function e(t,n){Y(this,e);var s=ae(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));s.__color=new O(s.getValue()),s.__temp=new O(0);var i=s;s.domElement=document.createElement("div"),p.makeSelectable(s.domElement,!1),s.__selector=document.createElement("div"),s.__selector.className="selector",s.__saturation_field=document.createElement("div"),s.__saturation_field.className="saturation-field",s.__field_knob=document.createElement("div"),s.__field_knob.className="field-knob",s.__field_knob_border="2px solid ",s.__hue_knob=document.createElement("div"),s.__hue_knob.className="hue-knob",s.__hue_field=document.createElement("div"),s.__hue_field.className="hue-field",s.__input=document.createElement("input"),s.__input.type="text",s.__input_textShadow="0 1px 1px ",p.bind(s.__input,"keydown",function(g){g.keyCode===13&&l.call(this)}),p.bind(s.__input,"blur",l),p.bind(s.__selector,"mousedown",function(){p.addClass(this,"drag").bind(window,"mouseup",function(){p.removeClass(i.__selector,"drag")})}),p.bind(s.__selector,"touchstart",function(){p.addClass(this,"drag").bind(window,"touchend",function(){p.removeClass(i.__selector,"drag")})});var r=document.createElement("div");m.extend(s.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),m.extend(s.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:s.__field_knob_border+(s.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),m.extend(s.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),m.extend(s.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),m.extend(r.style,{width:"100%",height:"100%",background:"none"}),Zt(r,"top","rgba(0,0,0,0)","#000"),m.extend(s.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),ai(s.__hue_field),m.extend(s.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:s.__input_textShadow+"rgba(0,0,0,0.7)"}),p.bind(s.__saturation_field,"mousedown",a),p.bind(s.__saturation_field,"touchstart",a),p.bind(s.__field_knob,"mousedown",a),p.bind(s.__field_knob,"touchstart",a),p.bind(s.__hue_field,"mousedown",c),p.bind(s.__hue_field,"touchstart",c);function a(g){_(g),p.bind(window,"mousemove",_),p.bind(window,"touchmove",_),p.bind(window,"mouseup",u),p.bind(window,"touchend",u)}function c(g){y(g),p.bind(window,"mousemove",y),p.bind(window,"touchmove",y),p.bind(window,"mouseup",f),p.bind(window,"touchend",f)}function u(){p.unbind(window,"mousemove",_),p.unbind(window,"touchmove",_),p.unbind(window,"mouseup",u),p.unbind(window,"touchend",u),d()}function f(){p.unbind(window,"mousemove",y),p.unbind(window,"touchmove",y),p.unbind(window,"mouseup",f),p.unbind(window,"touchend",f),d()}function l(){var g=gt(this.value);g!==!1?(i.__color.__state=g,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}s.__saturation_field.appendChild(r),s.__selector.appendChild(s.__field_knob),s.__selector.appendChild(s.__saturation_field),s.__selector.appendChild(s.__hue_field),s.__hue_field.appendChild(s.__hue_knob),s.domElement.appendChild(s.__input),s.domElement.appendChild(s.__selector),s.updateDisplay();function _(g){g.type.indexOf("touch")===-1&&g.preventDefault();var b=i.__saturation_field.getBoundingClientRect(),w=g.touches&&g.touches[0]||g,A=w.clientX,v=w.clientY,S=(A-b.left)/(b.right-b.left),T=1-(v-b.top)/(b.bottom-b.top);return T>1?T=1:T<0&&(T=0),S>1?S=1:S<0&&(S=0),i.__color.v=T,i.__color.s=S,i.setValue(i.__color.toOriginal()),!1}function y(g){g.type.indexOf("touch")===-1&&g.preventDefault();var b=i.__hue_field.getBoundingClientRect(),w=g.touches&&g.touches[0]||g,A=w.clientY,v=1-(A-b.top)/(b.bottom-b.top);return v>1?v=1:v<0&&(v=0),i.__color.h=v*360,i.setValue(i.__color.toOriginal()),!1}return s}return W(e,[{key:"updateDisplay",value:function(){var n=gt(this.getValue());if(n!==!1){var s=!1;m.each(O.COMPONENTS,function(a){if(!m.isUndefined(n[a])&&!m.isUndefined(this.__color.__state[a])&&n[a]!==this.__color.__state[a])return s=!0,{}},this),s&&m.extend(this.__color.__state,n)}m.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||this.__color.s>.5?255:0,r=255-i;m.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Zt(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),m.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(fe),ri=["-moz-","-o-","-webkit-","-ms-",""];function Zt(o,e,t,n){o.style.background="",m.each(ri,function(s){o.style.cssText+="background: "+s+"linear-gradient("+e+", "+t+" 0%, "+n+" 100%); "})}function ai(o){o.style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var ci={load:function(e,t){var n=t||document,s=n.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=e,n.getElementsByTagName("head")[0].appendChild(s)},inject:function(e,t){var n=t||document,s=document.createElement("style");s.type="text/css",s.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(s)}catch{}}},li=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,ui=function(e,t){var n=e[t];return m.isArray(arguments[2])||m.isObject(arguments[2])?new si(e,t,arguments[2]):m.isNumber(n)?m.isNumber(arguments[2])&&m.isNumber(arguments[3])?m.isNumber(arguments[4])?new bt(e,t,arguments[2],arguments[3],arguments[4]):new bt(e,t,arguments[2],arguments[3]):m.isNumber(arguments[4])?new qe(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new qe(e,t,{min:arguments[2],max:arguments[3]}):m.isString(n)?new ii(e,t):m.isFunction(n)?new Cn(e,t,""):m.isBoolean(n)?new Sn(e,t):null};function di(o){setTimeout(o,1e3/60)}var fi=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||di,hi=function(){function o(){Y(this,o),this.backgroundElement=document.createElement("div"),m.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),p.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),m.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;p.bind(this.backgroundElement,"click",function(){e.hide()})}return W(o,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),m.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,n=function s(){t.domElement.style.display="none",t.backgroundElement.style.display="none",p.unbind(t.domElement,"webkitTransitionEnd",s),p.unbind(t.domElement,"transitionend",s),p.unbind(t.domElement,"oTransitionEnd",s)};p.bind(this.domElement,"webkitTransitionEnd",n),p.bind(this.domElement,"transitionend",n),p.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-p.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-p.getHeight(this.domElement)/2+"px"}}]),o}(),pi=Qs(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);ci.inject(pi);var en="dg",tn=72,nn=20,Ie="Default",Ce=function(){try{return!!window.localStorage}catch{return!1}}(),ke=void 0,sn=!0,be=void 0,ct=!1,Rn=[],C=function o(e){var t=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,en),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=m.defaults(n,{closeOnTop:!1,autoPlace:!0,width:o.DEFAULT_WIDTH}),n=m.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),m.isUndefined(n.load)?n.load={preset:Ie}:n.preset&&(n.load.preset=n.preset),m.isUndefined(n.parent)&&n.hideable&&Rn.push(this),n.resizable=m.isUndefined(n.parent)&&n.resizable,n.autoPlace&&m.isUndefined(n.scrollable)&&(n.scrollable=!0);var s=Ce&&localStorage.getItem(ye(this,"isLocal"))==="true",i=void 0,r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:n.load.preset},set:function(d){t.parent?t.getRoot().preset=d:n.load.preset=d,bi(this),t.revert()}},width:{get:function(){return n.width},set:function(d){n.width=d,xt(t,d)}},name:{get:function(){return n.name},set:function(d){n.name=d,r&&(r.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(d){n.closed=d,n.closed?p.addClass(t.__ul,o.CLASS_CLOSED):p.removeClass(t.__ul,o.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=d?o.TEXT_OPEN:o.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(d){Ce&&(s=d,d?p.bind(window,"unload",i):p.unbind(window,"unload",i),localStorage.setItem(ye(t,"isLocal"),d))}}}),m.isUndefined(n.parent)){if(this.closed=n.closed||!1,p.addClass(this.domElement,o.CLASS_MAIN),p.makeSelectable(this.domElement,!1),Ce&&s){t.useLocalStorage=!0;var a=localStorage.getItem(ye(this,"gui"));a&&(n.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=o.TEXT_CLOSED,p.addClass(this.__closeButton,o.CLASS_CLOSE_BUTTON),n.closeOnTop?(p.addClass(this.__closeButton,o.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(p.addClass(this.__closeButton,o.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),p.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{n.closed===void 0&&(n.closed=!0);var c=document.createTextNode(n.name);p.addClass(c,"controller-name"),r=Rt(t,c);var u=function(d){return d.preventDefault(),t.closed=!t.closed,!1};p.addClass(this.__ul,o.CLASS_CLOSED),p.addClass(r,"title"),p.bind(r,"click",u),n.closed||(this.closed=!1)}n.autoPlace&&(m.isUndefined(n.parent)&&(sn&&(be=document.createElement("div"),p.addClass(be,en),p.addClass(be,o.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(be),sn=!1),be.appendChild(this.domElement),p.addClass(this.domElement,o.CLASS_AUTO_PLACE)),this.parent||xt(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},p.bind(window,"resize",this.__resizeHandler),p.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),p.bind(this.__ul,"transitionend",this.__resizeHandler),p.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&gi(this),i=function(){Ce&&localStorage.getItem(ye(t,"isLocal"))==="true"&&localStorage.setItem(ye(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=i;function f(){var l=t.getRoot();l.width+=1,m.defer(function(){l.width-=1})}n.parent||f()};C.toggleHide=function(){ct=!ct,m.each(Rn,function(o){o.domElement.style.display=ct?"none":""})};C.CLASS_AUTO_PLACE="a";C.CLASS_AUTO_PLACE_CONTAINER="ac";C.CLASS_MAIN="main";C.CLASS_CONTROLLER_ROW="cr";C.CLASS_TOO_TALL="taller-than-window";C.CLASS_CLOSED="closed";C.CLASS_CLOSE_BUTTON="close-button";C.CLASS_CLOSE_TOP="close-top";C.CLASS_CLOSE_BOTTOM="close-bottom";C.CLASS_DRAG="drag";C.DEFAULT_WIDTH=245;C.TEXT_CLOSED="Close Controls";C.TEXT_OPEN="Open Controls";C._keydownHandler=function(o){document.activeElement.type!=="text"&&(o.which===tn||o.keyCode===tn)&&C.toggleHide()};p.bind(window,"keydown",C._keydownHandler,!1);m.extend(C.prototype,{add:function(e,t){return Me(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Me(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;m.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&be.removeChild(this.domElement);var e=this;m.each(this.__folders,function(t){e.removeFolder(t)}),p.unbind(window,"keydown",C._keydownHandler,!1),on(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new C(t);this.__folders[e]=n;var s=Rt(this,n.domElement);return p.addClass(s,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],on(e);var t=this;m.each(e.__folders,function(n){e.removeFolder(n)}),m.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,n=0;m.each(e.__ul.childNodes,function(s){e.autoPlace&&s===e.__save_row||(n+=p.getHeight(s))}),window.innerHeight-t-nn<n?(p.addClass(e.domElement,C.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-nn+"px"):(p.removeClass(e.domElement,C.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&m.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:m.debounce(function(){this.onResize()},50),remember:function(){if(m.isUndefined(ke)&&(ke=new hi,ke.domElement.innerHTML=li),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;m.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&_i(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&xt(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=je(this)),e.folders={},m.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=je(this),wt(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Ie]=je(this,!0)),this.load.remembered[e]=je(this),this.preset=e,Et(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){m.each(this.__controllers,function(t){this.getRoot().load.remembered?On(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),m.each(this.__folders,function(t){t.revert(t)}),e||wt(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&kn(this.__listening)},updateDisplay:function(){m.each(this.__controllers,function(e){e.updateDisplay()}),m.each(this.__folders,function(e){e.updateDisplay()})}});function Rt(o,e,t){var n=document.createElement("li");return e&&n.appendChild(e),t?o.__ul.insertBefore(n,t):o.__ul.appendChild(n),o.onResize(),n}function on(o){p.unbind(window,"resize",o.__resizeHandler),o.saveToLocalStorageIfPossible&&p.unbind(window,"unload",o.saveToLocalStorageIfPossible)}function wt(o,e){var t=o.__preset_select[o.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function mi(o,e,t){if(t.__li=e,t.__gui=o,m.extend(t,{options:function(r){if(arguments.length>1){var a=t.__li.nextElementSibling;return t.remove(),Me(o,t.object,t.property,{before:a,factoryArgs:[m.toArray(arguments)]})}if(m.isArray(r)||m.isObject(r)){var c=t.__li.nextElementSibling;return t.remove(),Me(o,t.object,t.property,{before:c,factoryArgs:[r]})}},name:function(r){return t.__li.firstElementChild.firstElementChild.innerHTML=r,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof bt){var n=new qe(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});m.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(i){var r=t[i],a=n[i];t[i]=n[i]=function(){var c=Array.prototype.slice.call(arguments);return a.apply(n,c),r.apply(t,c)}}),p.addClass(e,"has-slider"),t.domElement.insertBefore(n.domElement,t.domElement.firstElementChild)}else if(t instanceof qe){var s=function(r){if(m.isNumber(t.__min)&&m.isNumber(t.__max)){var a=t.__li.firstElementChild.firstElementChild.innerHTML,c=t.__gui.__listening.indexOf(t)>-1;t.remove();var u=Me(o,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return u.name(a),c&&u.listen(),u}return r};t.min=m.compose(s,t.min),t.max=m.compose(s,t.max)}else t instanceof Sn?(p.bind(e,"click",function(){p.fakeEvent(t.__checkbox,"click")}),p.bind(t.__checkbox,"click",function(i){i.stopPropagation()})):t instanceof Cn?(p.bind(e,"click",function(){p.fakeEvent(t.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(t.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(t.__button,"hover")})):t instanceof yt&&(p.addClass(e,"color"),t.updateDisplay=m.compose(function(i){return e.style.borderLeftColor=t.__color.toString(),i},t.updateDisplay),t.updateDisplay());t.setValue=m.compose(function(i){return o.getRoot().__preset_select&&t.isModified()&&wt(o.getRoot(),!0),i},t.setValue)}function On(o,e){var t=o.getRoot(),n=t.__rememberedObjects.indexOf(e.object);if(n!==-1){var s=t.__rememberedObjectIndecesToControllers[n];if(s===void 0&&(s={},t.__rememberedObjectIndecesToControllers[n]=s),s[e.property]=e,t.load&&t.load.remembered){var i=t.load.remembered,r=void 0;if(i[o.preset])r=i[o.preset];else if(i[Ie])r=i[Ie];else return;if(r[n]&&r[n][e.property]!==void 0){var a=r[n][e.property];e.initialValue=a,e.setValue(a)}}}}function Me(o,e,t,n){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var s=void 0;if(n.color)s=new yt(e,t);else{var i=[e,t].concat(n.factoryArgs);s=ui.apply(o,i)}n.before instanceof fe&&(n.before=n.before.__li),On(o,s),p.addClass(s.domElement,"c");var r=document.createElement("span");p.addClass(r,"property-name"),r.innerHTML=s.property;var a=document.createElement("div");a.appendChild(r),a.appendChild(s.domElement);var c=Rt(o,a,n.before);return p.addClass(c,C.CLASS_CONTROLLER_ROW),s instanceof yt?p.addClass(c,"color"):p.addClass(c,ei(s.getValue())),mi(o,c,s),o.__controllers.push(s),s}function ye(o,e){return document.location.href+"."+e}function Et(o,e,t){var n=document.createElement("option");n.innerHTML=e,n.value=e,o.__preset_select.appendChild(n),t&&(o.__preset_select.selectedIndex=o.__preset_select.length-1)}function rn(o,e){e.style.display=o.useLocalStorage?"block":"none"}function _i(o){var e=o.__save_row=document.createElement("li");p.addClass(o.domElement,"has-save"),o.__ul.insertBefore(e,o.__ul.firstChild),p.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",p.addClass(t,"button gears");var n=document.createElement("span");n.innerHTML="Save",p.addClass(n,"button"),p.addClass(n,"save");var s=document.createElement("span");s.innerHTML="New",p.addClass(s,"button"),p.addClass(s,"save-as");var i=document.createElement("span");i.innerHTML="Revert",p.addClass(i,"button"),p.addClass(i,"revert");var r=o.__preset_select=document.createElement("select");if(o.load&&o.load.remembered?m.each(o.load.remembered,function(l,d){Et(o,d,d===o.preset)}):Et(o,Ie,!1),p.bind(r,"change",function(){for(var l=0;l<o.__preset_select.length;l++)o.__preset_select[l].innerHTML=o.__preset_select[l].value;o.preset=this.value}),e.appendChild(r),e.appendChild(t),e.appendChild(n),e.appendChild(s),e.appendChild(i),Ce){var a=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage"),u=document.getElementById("dg-save-locally");u.style.display="block",localStorage.getItem(ye(o,"isLocal"))==="true"&&c.setAttribute("checked","checked"),rn(o,a),p.bind(c,"change",function(){o.useLocalStorage=!o.useLocalStorage,rn(o,a)})}var f=document.getElementById("dg-new-constructor");p.bind(f,"keydown",function(l){l.metaKey&&(l.which===67||l.keyCode===67)&&ke.hide()}),p.bind(t,"click",function(){f.innerHTML=JSON.stringify(o.getSaveObject(),void 0,2),ke.show(),f.focus(),f.select()}),p.bind(n,"click",function(){o.save()}),p.bind(s,"click",function(){var l=prompt("Enter a new preset name.");l&&o.saveAs(l)}),p.bind(i,"click",function(){o.revert()})}function gi(o){var e=void 0;o.__resize_handle=document.createElement("div"),m.extend(o.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(i){return i.preventDefault(),o.width+=e-i.clientX,o.onResize(),e=i.clientX,!1}function n(){p.removeClass(o.__closeButton,C.CLASS_DRAG),p.unbind(window,"mousemove",t),p.unbind(window,"mouseup",n)}function s(i){return i.preventDefault(),e=i.clientX,p.addClass(o.__closeButton,C.CLASS_DRAG),p.bind(window,"mousemove",t),p.bind(window,"mouseup",n),!1}p.bind(o.__resize_handle,"mousedown",s),p.bind(o.__closeButton,"mousedown",s),o.domElement.insertBefore(o.__resize_handle,o.domElement.firstElementChild)}function xt(o,e){o.domElement.style.width=e+"px",o.__save_row&&o.autoPlace&&(o.__save_row.style.width=e+"px"),o.__closeButton&&(o.__closeButton.style.width=e+"px")}function je(o,e){var t={};return m.each(o.__rememberedObjects,function(n,s){var i={},r=o.__rememberedObjectIndecesToControllers[s];m.each(r,function(a,c){i[c]=e?a.initialValue:a.getValue()}),t[s]=i}),t}function bi(o){for(var e=0;e<o.__preset_select.length;e++)o.__preset_select[e].value===o.preset&&(o.__preset_select.selectedIndex=e)}function kn(o){o.length!==0&&fi.call(window,function(){kn(o)}),m.each(o,function(e){e.updateDisplay()})}const an={type:"change"},lt={type:"start"},cn={type:"end"};class yi extends ls{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new D,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:_e.ROTATE,MIDDLE:_e.DOLLY,RIGHT:_e.PAN},this.touches={ONE:ge.ROTATE,TWO:ge.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(h){h.addEventListener("keydown",jt),this._domElementKeyEvents=h},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(an),n.update(),i=s.NONE},this.update=function(){const h=new D,E=new Ve().setFromUnitVectors(e.up,new D(0,1,0)),R=E.clone().invert(),M=new D,K=new Ve,me=2*Math.PI;return function(){const Kt=n.object.position;h.copy(Kt).sub(n.target),h.applyQuaternion(E),a.setFromVector3(h),n.autoRotate&&i===s.NONE&&U(I()),n.enableDamping?(a.theta+=c.theta*n.dampingFactor,a.phi+=c.phi*n.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let J=n.minAzimuthAngle,Q=n.maxAzimuthAngle;return isFinite(J)&&isFinite(Q)&&(J<-Math.PI?J+=me:J>Math.PI&&(J-=me),Q<-Math.PI?Q+=me:Q>Math.PI&&(Q-=me),J<=Q?a.theta=Math.max(J,Math.min(Q,a.theta)):a.theta=a.theta>(J+Q)/2?Math.max(J,a.theta):Math.min(Q,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=u,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),h.setFromSpherical(a),h.applyQuaternion(R),Kt.copy(n.target).add(h),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),f.set(0,0,0)),u=1,l||M.distanceToSquared(n.object.position)>r||8*(1-K.dot(n.object.quaternion))>r?(n.dispatchEvent(an),M.copy(n.object.position),K.copy(n.object.quaternion),l=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Gt),n.domElement.removeEventListener("pointerdown",Ht),n.domElement.removeEventListener("pointercancel",Bt),n.domElement.removeEventListener("wheel",Ut),n.domElement.removeEventListener("pointermove",st),n.domElement.removeEventListener("pointerup",it),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",jt)};const n=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=s.NONE;const r=1e-6,a=new Xt,c=new Xt;let u=1;const f=new D;let l=!1;const d=new B,_=new B,y=new B,g=new B,b=new B,w=new B,A=new B,v=new B,S=new B,T=[],P={};function I(){return 2*Math.PI/60/60*n.autoRotateSpeed}function H(){return Math.pow(.95,n.zoomSpeed)}function U(h){c.theta-=h}function pe(h){c.phi-=h}const ce=function(){const h=new D;return function(R,M){h.setFromMatrixColumn(M,0),h.multiplyScalar(-R),f.add(h)}}(),$=function(){const h=new D;return function(R,M){n.screenSpacePanning===!0?h.setFromMatrixColumn(M,1):(h.setFromMatrixColumn(M,0),h.crossVectors(n.object.up,h)),h.multiplyScalar(R),f.add(h)}}(),k=function(){const h=new D;return function(R,M){const K=n.domElement;if(n.object.isPerspectiveCamera){const me=n.object.position;h.copy(me).sub(n.target);let He=h.length();He*=Math.tan(n.object.fov/2*Math.PI/180),ce(2*R*He/K.clientHeight,n.object.matrix),$(2*M*He/K.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(ce(R*(n.object.right-n.object.left)/n.object.zoom/K.clientWidth,n.object.matrix),$(M*(n.object.top-n.object.bottom)/n.object.zoom/K.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function ee(h){n.object.isPerspectiveCamera?u/=h:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*h)),n.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(h){n.object.isPerspectiveCamera?u*=h:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Te(h){d.set(h.clientX,h.clientY)}function nt(h){A.set(h.clientX,h.clientY)}function Fe(h){g.set(h.clientX,h.clientY)}function qn(h){_.set(h.clientX,h.clientY),y.subVectors(_,d).multiplyScalar(n.rotateSpeed);const E=n.domElement;U(2*Math.PI*y.x/E.clientHeight),pe(2*Math.PI*y.y/E.clientHeight),d.copy(_),n.update()}function $n(h){v.set(h.clientX,h.clientY),S.subVectors(v,A),S.y>0?ee(H()):S.y<0&&z(H()),A.copy(v),n.update()}function Jn(h){b.set(h.clientX,h.clientY),w.subVectors(b,g).multiplyScalar(n.panSpeed),k(w.x,w.y),g.copy(b),n.update()}function Qn(h){h.deltaY<0?z(H()):h.deltaY>0&&ee(H()),n.update()}function Zn(h){let E=!1;switch(h.code){case n.keys.UP:h.ctrlKey||h.metaKey||h.shiftKey?pe(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,n.keyPanSpeed),E=!0;break;case n.keys.BOTTOM:h.ctrlKey||h.metaKey||h.shiftKey?pe(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,-n.keyPanSpeed),E=!0;break;case n.keys.LEFT:h.ctrlKey||h.metaKey||h.shiftKey?U(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(n.keyPanSpeed,0),E=!0;break;case n.keys.RIGHT:h.ctrlKey||h.metaKey||h.shiftKey?U(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(-n.keyPanSpeed,0),E=!0;break}E&&(h.preventDefault(),n.update())}function Mt(){if(T.length===1)d.set(T[0].pageX,T[0].pageY);else{const h=.5*(T[0].pageX+T[1].pageX),E=.5*(T[0].pageY+T[1].pageY);d.set(h,E)}}function Nt(){if(T.length===1)g.set(T[0].pageX,T[0].pageY);else{const h=.5*(T[0].pageX+T[1].pageX),E=.5*(T[0].pageY+T[1].pageY);g.set(h,E)}}function Pt(){const h=T[0].pageX-T[1].pageX,E=T[0].pageY-T[1].pageY,R=Math.sqrt(h*h+E*E);A.set(0,R)}function es(){n.enableZoom&&Pt(),n.enablePan&&Nt()}function ts(){n.enableZoom&&Pt(),n.enableRotate&&Mt()}function It(h){if(T.length==1)_.set(h.pageX,h.pageY);else{const R=ot(h),M=.5*(h.pageX+R.x),K=.5*(h.pageY+R.y);_.set(M,K)}y.subVectors(_,d).multiplyScalar(n.rotateSpeed);const E=n.domElement;U(2*Math.PI*y.x/E.clientHeight),pe(2*Math.PI*y.y/E.clientHeight),d.copy(_)}function Dt(h){if(T.length===1)b.set(h.pageX,h.pageY);else{const E=ot(h),R=.5*(h.pageX+E.x),M=.5*(h.pageY+E.y);b.set(R,M)}w.subVectors(b,g).multiplyScalar(n.panSpeed),k(w.x,w.y),g.copy(b)}function Ft(h){const E=ot(h),R=h.pageX-E.x,M=h.pageY-E.y,K=Math.sqrt(R*R+M*M);v.set(0,K),S.set(0,Math.pow(v.y/A.y,n.zoomSpeed)),ee(S.y),A.copy(v)}function ns(h){n.enableZoom&&Ft(h),n.enablePan&&Dt(h)}function ss(h){n.enableZoom&&Ft(h),n.enableRotate&&It(h)}function Ht(h){n.enabled!==!1&&(T.length===0&&(n.domElement.setPointerCapture(h.pointerId),n.domElement.addEventListener("pointermove",st),n.domElement.addEventListener("pointerup",it)),cs(h),h.pointerType==="touch"?rs(h):is(h))}function st(h){n.enabled!==!1&&(h.pointerType==="touch"?as(h):os(h))}function it(h){Vt(h),T.length===0&&(n.domElement.releasePointerCapture(h.pointerId),n.domElement.removeEventListener("pointermove",st),n.domElement.removeEventListener("pointerup",it)),n.dispatchEvent(cn),i=s.NONE}function Bt(h){Vt(h)}function is(h){let E;switch(h.button){case 0:E=n.mouseButtons.LEFT;break;case 1:E=n.mouseButtons.MIDDLE;break;case 2:E=n.mouseButtons.RIGHT;break;default:E=-1}switch(E){case _e.DOLLY:if(n.enableZoom===!1)return;nt(h),i=s.DOLLY;break;case _e.ROTATE:if(h.ctrlKey||h.metaKey||h.shiftKey){if(n.enablePan===!1)return;Fe(h),i=s.PAN}else{if(n.enableRotate===!1)return;Te(h),i=s.ROTATE}break;case _e.PAN:if(h.ctrlKey||h.metaKey||h.shiftKey){if(n.enableRotate===!1)return;Te(h),i=s.ROTATE}else{if(n.enablePan===!1)return;Fe(h),i=s.PAN}break;default:i=s.NONE}i!==s.NONE&&n.dispatchEvent(lt)}function os(h){switch(i){case s.ROTATE:if(n.enableRotate===!1)return;qn(h);break;case s.DOLLY:if(n.enableZoom===!1)return;$n(h);break;case s.PAN:if(n.enablePan===!1)return;Jn(h);break}}function Ut(h){n.enabled===!1||n.enableZoom===!1||i!==s.NONE||(h.preventDefault(),n.dispatchEvent(lt),Qn(h),n.dispatchEvent(cn))}function jt(h){n.enabled===!1||n.enablePan===!1||Zn(h)}function rs(h){switch(zt(h),T.length){case 1:switch(n.touches.ONE){case ge.ROTATE:if(n.enableRotate===!1)return;Mt(),i=s.TOUCH_ROTATE;break;case ge.PAN:if(n.enablePan===!1)return;Nt(),i=s.TOUCH_PAN;break;default:i=s.NONE}break;case 2:switch(n.touches.TWO){case ge.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;es(),i=s.TOUCH_DOLLY_PAN;break;case ge.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ts(),i=s.TOUCH_DOLLY_ROTATE;break;default:i=s.NONE}break;default:i=s.NONE}i!==s.NONE&&n.dispatchEvent(lt)}function as(h){switch(zt(h),i){case s.TOUCH_ROTATE:if(n.enableRotate===!1)return;It(h),n.update();break;case s.TOUCH_PAN:if(n.enablePan===!1)return;Dt(h),n.update();break;case s.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ns(h),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ss(h),n.update();break;default:i=s.NONE}}function Gt(h){n.enabled!==!1&&h.preventDefault()}function cs(h){T.push(h)}function Vt(h){delete P[h.pointerId];for(let E=0;E<T.length;E++)if(T[E].pointerId==h.pointerId){T.splice(E,1);return}}function zt(h){let E=P[h.pointerId];E===void 0&&(E=new B,P[h.pointerId]=E),E.set(h.pageX,h.pageY)}function ot(h){const E=h.pointerId===T[0].pointerId?T[1]:T[0];return P[E.pointerId]}n.domElement.addEventListener("contextmenu",Gt),n.domElement.addEventListener("pointerdown",Ht),n.domElement.addEventListener("pointercancel",Bt),n.domElement.addEventListener("wheel",Ut,{passive:!1}),this.update()}}function ln(o,e){if(e===us)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),o;if(e===ht||e===_n){let t=o.getIndex();if(t===null){const r=[],a=o.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)r.push(c);o.setIndex(r),t=o.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o}const n=t.count-2,s=[];if(e===ht)for(let r=1;r<=n;r++)s.push(t.getX(0)),s.push(t.getX(r)),s.push(t.getX(r+1));else for(let r=0;r<n;r++)r%2===0?(s.push(t.getX(r)),s.push(t.getX(r+1)),s.push(t.getX(r+2))):(s.push(t.getX(r+2)),s.push(t.getX(r+1)),s.push(t.getX(r)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=o.clone();return i.setIndex(s),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),o}class wi extends St{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ai(t)}),this.register(function(t){return new Mi(t)}),this.register(function(t){return new Ni(t)}),this.register(function(t){return new Li(t)}),this.register(function(t){return new Ci(t)}),this.register(function(t){return new Ri(t)}),this.register(function(t){return new Oi(t)}),this.register(function(t){return new vi(t)}),this.register(function(t){return new ki(t)}),this.register(function(t){return new Si(t)}),this.register(function(t){return new xi(t)}),this.register(function(t){return new Pi(t)}),this.register(function(t){return new Ii(t)})}load(e,t,n,s){const i=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=pt.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){s?s(u):console.error(u),i.manager.itemError(e),i.manager.itemEnd(e)},c=new Pe(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{i.parse(u,r,function(f){t(f),i.manager.itemEnd(e)},a)}catch(f){a(f)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let i;const r={},a={},c=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===Mn){try{r[L.KHR_BINARY_GLTF]=new Di(e)}catch(l){s&&s(l);return}i=JSON.parse(r[L.KHR_BINARY_GLTF].content)}else i=JSON.parse(c.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new qi(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const l=this.pluginCallbacks[f](u);a[l.name]=l,r[l.name]=!0}if(i.extensionsUsed)for(let f=0;f<i.extensionsUsed.length;++f){const l=i.extensionsUsed[f],d=i.extensionsRequired||[];switch(l){case L.KHR_MATERIALS_UNLIT:r[l]=new Ti;break;case L.KHR_DRACO_MESH_COMPRESSION:r[l]=new Fi(i,this.dracoLoader);break;case L.KHR_TEXTURE_TRANSFORM:r[l]=new Hi;break;case L.KHR_MESH_QUANTIZATION:r[l]=new Bi;break;default:d.indexOf(l)>=0&&a[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}u.setExtensions(r),u.setPlugins(a),u.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,i){n.parse(e,t,s,i)})}}function Ei(){let o={};return{get:function(e){return o[e]},add:function(e,t){o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}const L={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class xi{constructor(e){this.parser=e,this.name=L.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const i=t.json,c=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let u;const f=new de(16777215);c.color!==void 0&&f.fromArray(c.color);const l=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new fs(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new X(f),u.distance=l;break;case"spot":u=new ds(f),u.distance=l,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,ne(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(u),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return n._getNodeRef(t.cache,a,c)})}}class Ti{constructor(){this.name=L.KHR_MATERIALS_UNLIT}getMaterialType(){return le}extendParams(e,t,n){const s=[];e.color=new de(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const r=i.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}i.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",i.baseColorTexture,xe))}return Promise.all(s)}}class vi{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class Ai{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];if(r.clearcoatFactor!==void 0&&(t.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new B(a,a)}return Promise.all(i)}}class Si{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];return r.iridescenceFactor!==void 0&&(t.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(t.iridescenceIOR=r.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(i)}}class Li{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new de(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=s.extensions[this.name];return r.sheenColorFactor!==void 0&&t.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&i.push(n.assignTexture(t,"sheenColorMap",r.sheenColorTexture,xe)),r.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(i)}}class Ci{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];return r.transmissionFactor!==void 0&&(t.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&i.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(i)}}class Ri{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];t.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&i.push(n.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return t.attenuationColor=new de(a[0],a[1],a[2]),Promise.all(i)}}class Oi{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class ki{constructor(e){this.parser=e,this.name=L.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Z}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];t.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&i.push(n.assignTexture(t,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return t.specularColor=new de(a[0],a[1],a[2]),r.specularColorTexture!==void 0&&i.push(n.assignTexture(t,"specularColorMap",r.specularColorTexture,xe)),Promise.all(i)}}class Mi{constructor(e){this.parser=e,this.name=L.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,r)}}class Ni{constructor(e){this.parser=e,this.name=L.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,i=s.textures[e];if(!i.extensions||!i.extensions[t])return null;const r=i.extensions[t],a=s.images[r.source];let c=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,r.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Pi{constructor(e){this.name=L.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const c=s.byteOffset||0,u=s.byteLength||0,f=s.count,l=s.byteStride,d=new Uint8Array(a,c,u);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(f,l,d,s.mode,s.filter).then(function(_){return _.buffer}):r.ready.then(function(){const _=new ArrayBuffer(f*l);return r.decodeGltfBuffer(new Uint8Array(_),f,l,d,s.mode,s.filter),_})})}else return null}}class Ii{constructor(e){this.name=L.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const u of s.primitives)if(u.mode!==j.TRIANGLES&&u.mode!==j.TRIANGLE_STRIP&&u.mode!==j.TRIANGLE_FAN&&u.mode!==void 0)return null;const r=n.extensions[this.name].attributes,a=[],c={};for(const u in r)a.push(this.parser.getDependency("accessor",r[u]).then(f=>(c[u]=f,c[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const f=u.pop(),l=f.isGroup?f.children:[f],d=u[0].count,_=[];for(const y of l){const g=new Ye,b=new D,w=new Ve,A=new D(1,1,1),v=new hs(y.geometry,y.material,d);for(let S=0;S<d;S++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,S),c.ROTATION&&w.fromBufferAttribute(c.ROTATION,S),c.SCALE&&A.fromBufferAttribute(c.SCALE,S),v.setMatrixAt(S,g.compose(b,w,A));for(const S in c)S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&y.geometry.setAttribute(S,c[S]);gn.prototype.copy.call(v,y),v.frustumCulled=!1,this.parser.assignFinalMaterial(v),_.push(v)}return f.isGroup?(f.clear(),f.add(..._),f):_[0]}))}}const Mn="glTF",Se=12,un={JSON:1313821514,BIN:5130562};class Di{constructor(e){this.name=L.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Se),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Mn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Se,i=new DataView(e,Se);let r=0;for(;r<s;){const a=i.getUint32(r,!0);r+=4;const c=i.getUint32(r,!0);if(r+=4,c===un.JSON){const u=new Uint8Array(e,Se+r,a);this.content=n.decode(u)}else if(c===un.BIN){const u=Se+r;this.body=e.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Fi{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=L.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,i=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},c={},u={};for(const f in r){const l=Tt[f]||f.toLowerCase();a[l]=r[f]}for(const f in e.attributes){const l=Tt[f]||f.toLowerCase();if(r[f]!==void 0){const d=n.accessors[e.attributes[f]],_=Ee[d.componentType];u[l]=_.name,c[l]=d.normalized===!0}}return t.getDependency("bufferView",i).then(function(f){return new Promise(function(l){s.decodeDracoFile(f,function(d){for(const _ in d.attributes){const y=d.attributes[_],g=c[_];g!==void 0&&(y.normalized=g)}l(d)},a,u)})})}}class Hi{constructor(){this.name=L.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Bi{constructor(){this.name=L.KHR_MESH_QUANTIZATION}}class Nn extends Us{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,i=e*s*3+s;for(let r=0;r!==s;r++)t[r]=n[i+r];return t}interpolate_(e,t,n,s){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=a*2,u=a*3,f=s-t,l=(n-t)/f,d=l*l,_=d*l,y=e*u,g=y-u,b=-2*_+3*d,w=_-d,A=1-b,v=w-d+l;for(let S=0;S!==a;S++){const T=r[g+S+a],P=r[g+S+c]*f,I=r[y+S+a],H=r[y+S]*f;i[S]=A*T+v*P+b*I+w*H}return i}}const Ui=new Ve;class ji extends Nn{interpolate_(e,t,n,s){const i=super.interpolate_(e,t,n,s);return Ui.fromArray(i).normalize().toArray(i),i}}const j={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ee={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dn={9728:_t,9729:bn,9984:Cs,9985:Rs,9986:Os,9987:yn},fn={33071:ks,33648:Ms,10497:mt},ut={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Tt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},te={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gi={CUBICSPLINE:void 0,LINEAR:Tn,STEP:Ns},dt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Vi(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new Ke({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ps})),o.DefaultMaterial}function Le(o,e,t){for(const n in t.extensions)o[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ne(o,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(o.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zi(o,e,t){let n=!1,s=!1,i=!1;for(let u=0,f=e.length;u<f;u++){const l=e[u];if(l.POSITION!==void 0&&(n=!0),l.NORMAL!==void 0&&(s=!0),l.COLOR_0!==void 0&&(i=!0),n&&s&&i)break}if(!n&&!s&&!i)return Promise.resolve(o);const r=[],a=[],c=[];for(let u=0,f=e.length;u<f;u++){const l=e[u];if(n){const d=l.POSITION!==void 0?t.getDependency("accessor",l.POSITION):o.attributes.position;r.push(d)}if(s){const d=l.NORMAL!==void 0?t.getDependency("accessor",l.NORMAL):o.attributes.normal;a.push(d)}if(i){const d=l.COLOR_0!==void 0?t.getDependency("accessor",l.COLOR_0):o.attributes.color;c.push(d)}}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(u){const f=u[0],l=u[1],d=u[2];return n&&(o.morphAttributes.position=f),s&&(o.morphAttributes.normal=l),i&&(o.morphAttributes.color=d),o.morphTargetsRelative=!0,o})}function Ki(o,e){if(o.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)o.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(o.morphTargetInfluences.length===t.length){o.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)o.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Xi(o){const e=o.extensions&&o.extensions[L.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+hn(e.attributes):t=o.indices+":"+hn(o.attributes)+":"+o.mode,t}function hn(o){let e="";const t=Object.keys(o).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+o[t[n]]+";";return e}function vt(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Yi(o){return o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0?"image/jpeg":o.search(/\.webp($|\?)/i)>0||o.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Wi=new Ye;class qi{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ei,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,i=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,i=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&i<98?this.textureLoader=new ze(this.options.manager):this.textureLoader=new ps(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Pe(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const a={scene:r[0][s.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:s.asset,parser:n,userData:{}};Le(i,a,s),ne(a,s),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,i=t.length;s<i;s++){const r=t[s].joints;for(let a=0,c=r.length;a<c;a++)e[r[a]].isBone=!0}for(let s=0,i=e.length;s<i;s++){const r=e[s];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),i=(r,a)=>{const c=this.associations.get(r);c!=null&&this.associations.set(a,c);for(const[u,f]of r.children.entries())i(f,a.children[u])};return i(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(i,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[L.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,r){n.load(pt.resolveURL(t.uri,s.path),i,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const r=ut[s.type],a=Ee[s.componentType],c=s.normalized===!0,u=new a(s.count*r);return Promise.resolve(new Oe(u,r,c))}const i=[];return s.bufferView!==void 0?i.push(this.getDependency("bufferView",s.bufferView)):i.push(null),s.sparse!==void 0&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(r){const a=r[0],c=ut[s.type],u=Ee[s.componentType],f=u.BYTES_PER_ELEMENT,l=f*c,d=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,y=s.normalized===!0;let g,b;if(_&&_!==l){const w=Math.floor(d/_),A="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+w+":"+s.count;let v=t.cache.get(A);v||(g=new u(a,w*_,s.count*_/f),v=new ms(g,_/f),t.cache.add(A,v)),b=new Is(v,c,d%_/f,y)}else a===null?g=new u(s.count*c):g=new u(a,d,s.count*c),b=new Oe(g,c,y);if(s.sparse!==void 0){const w=ut.SCALAR,A=Ee[s.sparse.indices.componentType],v=s.sparse.indices.byteOffset||0,S=s.sparse.values.byteOffset||0,T=new A(r[1],v,s.sparse.count*w),P=new u(r[2],S,s.sparse.count*c);a!==null&&(b=new Oe(b.array.slice(),b.itemSize,b.normalized));for(let I=0,H=T.length;I<H;I++){const U=T[I];if(b.setX(U,P[I*c]),c>=2&&b.setY(U,P[I*c+1]),c>=3&&b.setZ(U,P[I*c+2]),c>=4&&b.setW(U,P[I*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let a=this.textureLoader;if(r.uri){const c=n.manager.getHandler(r.uri);c!==null&&(a=c)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const s=this,i=this.json,r=i.textures[e],a=i.images[t],c=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=r.name||a.name||"";const d=(i.samplers||{})[r.sampler]||{};return f.magFilter=dn[d.magFilter]||bn,f.minFilter=dn[d.minFilter]||yn,f.wrapS=fn[d.wrapS]||mt,f.wrapT=fn[d.wrapT]||mt,s.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){const n=this,s=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const r=s.images[e],a=self.URL||self.webkitURL;let c=r.uri||"",u=!1;if(r.bufferView!==void 0)c=n.getDependency("bufferView",r.bufferView).then(function(l){u=!0;const d=new Blob([l],{type:r.mimeType});return c=a.createObjectURL(d),c});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(c).then(function(l){return new Promise(function(d,_){let y=d;t.isImageBitmapLoader===!0&&(y=function(g){const b=new Yt(g);b.needsUpdate=!0,d(b)}),t.load(pt.resolveURL(l,i.path),y,void 0,_)})}).then(function(l){return u===!0&&a.revokeObjectURL(c),l.userData.mimeType=r.mimeType||Yi(r.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),l});return this.sourceCache[e]=f,f}assignTexture(e,t,n,s){const i=this;return this.getDependency("texture",n.index).then(function(r){if(!r)return null;if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[L.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[L.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=i.associations.get(r);r=i.extensions[L.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),i.associations.set(r,c)}}return s!==void 0&&(r.encoding=s),e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,r=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new _s,rt.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(a,c)),n=c}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new gs,rt.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(a,c)),n=c}if(s||i||r){let a="ClonedMaterial:"+n.uuid+":";s&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=n.clone(),i&&(c.vertexColors=!0),r&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Ke}loadMaterial(e){const t=this,n=this.json,s=this.extensions,i=n.materials[e];let r;const a={},c=i.extensions||{},u=[];if(c[L.KHR_MATERIALS_UNLIT]){const l=s[L.KHR_MATERIALS_UNLIT];r=l.getMaterialType(),u.push(l.extendParams(a,i,t))}else{const l=i.pbrMetallicRoughness||{};if(a.color=new de(1,1,1),a.opacity=1,Array.isArray(l.baseColorFactor)){const d=l.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}l.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",l.baseColorTexture,xe)),a.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,a.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",l.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",l.metallicRoughnessTexture))),r=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=wn);const f=i.alphaMode||dt.OPAQUE;if(f===dt.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===dt.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&r!==le&&(u.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new B(1,1),i.normalTexture.scale!==void 0)){const l=i.normalTexture.scale;a.normalScale.set(l,l)}return i.occlusionTexture!==void 0&&r!==le&&(u.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&r!==le&&(a.emissive=new de().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&r!==le&&u.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,xe)),Promise.all(u).then(function(){const l=new r(a);return i.name&&(l.name=i.name),ne(l,i),t.associations.set(l,{materials:e}),i.extensions&&Le(s,l,i),l})}createUniqueName(e){const t=bs.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function i(a){return n[L.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return pn(c,a,t)})}const r=[];for(let a=0,c=e.length;a<c;a++){const u=e[a],f=Xi(u),l=s[f];if(l)r.push(l.promise);else{let d;u.extensions&&u.extensions[L.KHR_DRACO_MESH_COMPRESSION]?d=i(u):d=pn(new En,u,t),s[f]={primitive:u,promise:d},r.push(d)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,s=this.extensions,i=n.meshes[e],r=i.primitives,a=[];for(let c=0,u=r.length;c<u;c++){const f=r[c].material===void 0?Vi(this.cache):this.getDependency("material",r[c].material);a.push(f)}return a.push(t.loadGeometries(r)),Promise.all(a).then(function(c){const u=c.slice(0,c.length-1),f=c[c.length-1],l=[];for(let _=0,y=f.length;_<y;_++){const g=f[_],b=r[_];let w;const A=u[_];if(b.mode===j.TRIANGLES||b.mode===j.TRIANGLE_STRIP||b.mode===j.TRIANGLE_FAN||b.mode===void 0)w=i.isSkinnedMesh===!0?new ys(g,A):new Xe(g,A),w.isSkinnedMesh===!0&&!w.geometry.attributes.skinWeight.normalized&&w.normalizeSkinWeights(),b.mode===j.TRIANGLE_STRIP?w.geometry=ln(w.geometry,_n):b.mode===j.TRIANGLE_FAN&&(w.geometry=ln(w.geometry,ht));else if(b.mode===j.LINES)w=new ws(g,A);else if(b.mode===j.LINE_STRIP)w=new Es(g,A);else if(b.mode===j.LINE_LOOP)w=new xs(g,A);else if(b.mode===j.POINTS)w=new Ts(g,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(w.geometry.morphAttributes).length>0&&Ki(w,i),w.name=t.createUniqueName(i.name||"mesh_"+e),ne(w,i),b.extensions&&Le(s,w,b),t.assignFinalMaterial(w),l.push(w)}for(let _=0,y=l.length;_<y;_++)t.associations.set(l[_],{meshes:e,primitives:_});if(l.length===1)return l[0];const d=new at;t.associations.set(d,{meshes:e});for(let _=0,y=l.length;_<y;_++)d.add(l[_]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new xn(vs.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new As(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ne(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,i=t.joints.length;s<i;s++)n.push(this.getDependency("node",t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const i=s.pop(),r=s,a=[],c=[];for(let u=0,f=r.length;u<f;u++){const l=r[u];if(l){a.push(l);const d=new Ye;i!==null&&d.fromArray(i.array,u*16),c.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Ss(a,c)})}loadAnimation(e){const n=this.json.animations[e],s=[],i=[],r=[],a=[],c=[];for(let u=0,f=n.channels.length;u<f;u++){const l=n.channels[u],d=n.samplers[l.sampler],_=l.target,y=_.node,g=n.parameters!==void 0?n.parameters[d.input]:d.input,b=n.parameters!==void 0?n.parameters[d.output]:d.output;s.push(this.getDependency("node",y)),i.push(this.getDependency("accessor",g)),r.push(this.getDependency("accessor",b)),a.push(d),c.push(_)}return Promise.all([Promise.all(s),Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(u){const f=u[0],l=u[1],d=u[2],_=u[3],y=u[4],g=[];for(let w=0,A=f.length;w<A;w++){const v=f[w],S=l[w],T=d[w],P=_[w],I=y[w];if(v===void 0)continue;v.updateMatrix();let H;switch(te[I.path]){case te.weights:H=Fs;break;case te.rotation:H=Wt;break;case te.position:case te.scale:default:H=Ds;break}const U=v.name?v.name:v.uuid,pe=P.interpolation!==void 0?Gi[P.interpolation]:Tn,ce=[];te[I.path]===te.weights?v.traverse(function(k){k.morphTargetInfluences&&ce.push(k.name?k.name:k.uuid)}):ce.push(U);let $=T.array;if(T.normalized){const k=vt($.constructor),ee=new Float32Array($.length);for(let z=0,Te=$.length;z<Te;z++)ee[z]=$[z]*k;$=ee}for(let k=0,ee=ce.length;k<ee;k++){const z=new H(ce[k]+"."+te[I.path],S.array,$,pe);P.interpolation==="CUBICSPLINE"&&(z.createInterpolant=function(nt){const Fe=this instanceof Wt?ji:Nn;return new Fe(this.times,this.values,this.getValueSize()/3,nt)},z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(z)}}const b=n.name?n.name:"animation_"+e;return new vn(b,void 0,g)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(i){const r=n._getNodeRef(n.meshCache,s.mesh,i);return s.weights!==void 0&&r.traverse(function(a){if(a.isMesh)for(let c=0,u=s.weights.length;c<u;c++)a.morphTargetInfluences[c]=s.weights[c]}),r})}loadNode(e){const t=this.json,n=this.extensions,s=this,i=t.nodes[e],r=i.name?s.createUniqueName(i.name):"";return function(){const a=[],c=s._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});c&&a.push(c),i.camera!==void 0&&a.push(s.getDependency("camera",i.camera).then(function(d){return s._getNodeRef(s.cameraCache,i.camera,d)})),s._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){a.push(d)});const u=[],f=i.children||[];for(let d=0,_=f.length;d<_;d++)u.push(s.getDependency("node",f[d]));const l=i.skin===void 0?Promise.resolve(null):s.getDependency("skin",i.skin);return Promise.all([Promise.all(a),Promise.all(u),l])}().then(function(a){const c=a[0],u=a[1],f=a[2];let l;if(i.isBone===!0?l=new Ls:c.length>1?l=new at:c.length===1?l=c[0]:l=new gn,l!==c[0])for(let d=0,_=c.length;d<_;d++)l.add(c[d]);if(i.name&&(l.userData.name=i.name,l.name=r),ne(l,i),i.extensions&&Le(n,l,i),i.matrix!==void 0){const d=new Ye;d.fromArray(i.matrix),l.applyMatrix4(d)}else i.translation!==void 0&&l.position.fromArray(i.translation),i.rotation!==void 0&&l.quaternion.fromArray(i.rotation),i.scale!==void 0&&l.scale.fromArray(i.scale);s.associations.has(l)||s.associations.set(l,{}),s.associations.get(l).nodes=e,f!==null&&l.traverse(function(d){d.isSkinnedMesh&&d.bind(f,Wi)});for(let d=0,_=u.length;d<_;d++)l.add(u[d]);return l})}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,i=new at;n.name&&(i.name=s.createUniqueName(n.name)),ne(i,n),n.extensions&&Le(t,i,n);const r=n.nodes||[],a=[];for(let c=0,u=r.length;c<u;c++)a.push(s.getDependency("node",r[c]));return Promise.all(a).then(function(c){for(let f=0,l=c.length;f<l;f++)i.add(c[f]);const u=f=>{const l=new Map;for(const[d,_]of s.associations)(d instanceof rt||d instanceof Yt)&&l.set(d,_);return f.traverse(d=>{const _=s.associations.get(d);_!=null&&l.set(d,_)}),l};return s.associations=u(i),i})}}function $i(o,e,t){const n=e.attributes,s=new Hs;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],c=a.min,u=a.max;if(c!==void 0&&u!==void 0){if(s.set(new D(c[0],c[1],c[2]),new D(u[0],u[1],u[2])),a.normalized){const f=vt(Ee[a.componentType]);s.min.multiplyScalar(f),s.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new D,c=new D;for(let u=0,f=i.length;u<f;u++){const l=i[u];if(l.POSITION!==void 0){const d=t.json.accessors[l.POSITION],_=d.min,y=d.max;if(_!==void 0&&y!==void 0){if(c.setX(Math.max(Math.abs(_[0]),Math.abs(y[0]))),c.setY(Math.max(Math.abs(_[1]),Math.abs(y[1]))),c.setZ(Math.max(Math.abs(_[2]),Math.abs(y[2]))),d.normalized){const g=vt(Ee[d.componentType]);c.multiplyScalar(g)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}o.boundingBox=s;const r=new Bs;s.getCenter(r.center),r.radius=s.min.distanceTo(s.max)/2,o.boundingSphere=r}function pn(o,e,t){const n=e.attributes,s=[];function i(r,a){return t.getDependency("accessor",r).then(function(c){o.setAttribute(a,c)})}for(const r in n){const a=Tt[r]||r.toLowerCase();a in o.attributes||s.push(i(n[r],a))}if(e.indices!==void 0&&!o.index){const r=t.getDependency("accessor",e.indices).then(function(a){o.setIndex(a)});s.push(r)}return ne(o,e),$i(o,e,t),Promise.all(s).then(function(){return e.targets!==void 0?zi(o,e.targets,t):o})}const ft=new WeakMap;class Ji extends St{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const i=new Pe(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,r=>{this.decodeDracoFile(r,t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(ft.has(e)){const c=ft.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const i=this.workerNextTaskID++,r=e.byteLength,a=this._getWorker(i,r).then(c=>(s=c,new Promise((u,f)=>{s._callbacks[i]={resolve:u,reject:f},s.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{s&&i&&this._releaseTask(s,i)}),ft.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new En;e.index&&t.setIndex(new Oe(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],i=s.name,r=s.array,a=s.itemSize;t.setAttribute(i,new Oe(r,a))}return t}_loadLibrary(e,t){const n=new Pe(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,i)=>{n.load(e,s,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=Qi.toString(),r=["/* draco decoder */",s,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(i){const r=i.data;switch(r.type){case"decode":s._callbacks[r.id].resolve(r);break;case"error":s._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,i){return s._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Qi(){let o,e;onmessage=function(r){const a=r.data;switch(a.type){case"init":o=a.decoderConfig,e=new Promise(function(f){o.onModuleLoaded=function(l){f({draco:l})},DracoDecoderModule(o)});break;case"decode":const c=a.buffer,u=a.taskConfig;e.then(f=>{const l=f.draco,d=new l.Decoder,_=new l.DecoderBuffer;_.Init(new Int8Array(c),c.byteLength);try{const y=t(l,d,_,u),g=y.attributes.map(b=>b.array.buffer);y.index&&g.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},g)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{l.destroy(_),l.destroy(d)}});break}};function t(r,a,c,u){const f=u.attributeIDs,l=u.attributeTypes;let d,_;const y=a.GetEncodedGeometryType(c);if(y===r.TRIANGULAR_MESH)d=new r.Mesh,_=a.DecodeBufferToMesh(c,d);else if(y===r.POINT_CLOUD)d=new r.PointCloud,_=a.DecodeBufferToPointCloud(c,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const g={index:null,attributes:[]};for(const b in f){const w=self[l[b]];let A,v;if(u.useUniqueIDs)v=f[b],A=a.GetAttributeByUniqueId(d,v);else{if(v=a.GetAttributeId(d,r[f[b]]),v===-1)continue;A=a.GetAttribute(d,v)}g.attributes.push(s(r,a,d,b,w,A))}return y===r.TRIANGULAR_MESH&&(g.index=n(r,a,d)),r.destroy(d),g}function n(r,a,c){const f=c.num_faces()*3,l=f*4,d=r._malloc(l);a.GetTrianglesUInt32Array(c,l,d);const _=new Uint32Array(r.HEAPF32.buffer,d,f).slice();return r._free(d),{array:_,itemSize:1}}function s(r,a,c,u,f,l){const d=l.num_components(),y=c.num_points()*d,g=y*f.BYTES_PER_ELEMENT,b=i(r,f),w=r._malloc(g);a.GetAttributeDataArrayForAllPoints(c,l,b,g,w);const A=new f(r.HEAPF32.buffer,w,y).slice();return r._free(w),{name:u,array:A,itemSize:d}}function i(r,a){switch(a){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}class Zi extends St{constructor(e){super(e)}load(e,t,n,s){const i=this,r=new Pe(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(a){const c=i.parse(JSON.parse(a));t&&t(c)},n,s)}parse(e){return new eo(e)}}class eo{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],s=to(e,t,this.data);for(let i=0,r=s.length;i<r;i++)n.push(...s[i].toShapes());return n}}function to(o,e,t){const n=Array.from(o),s=e/t.resolution,i=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,r=[];let a=0,c=0;for(let u=0;u<n.length;u++){const f=n[u];if(f===`
`)a=0,c-=i;else{const l=no(f,s,a,c,t);a+=l.offsetX,r.push(l.path)}}return r}function no(o,e,t,n,s){const i=s.glyphs[o]||s.glyphs["?"];if(!i){console.error('THREE.Font: character "'+o+'" does not exists in font family '+s.familyName+".");return}const r=new js;let a,c,u,f,l,d,_,y;if(i.o){const g=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let b=0,w=g.length;b<w;)switch(g[b++]){case"m":a=g[b++]*e+t,c=g[b++]*e+n,r.moveTo(a,c);break;case"l":a=g[b++]*e+t,c=g[b++]*e+n,r.lineTo(a,c);break;case"q":u=g[b++]*e+t,f=g[b++]*e+n,l=g[b++]*e+t,d=g[b++]*e+n,r.quadraticCurveTo(l,d,u,f);break;case"b":u=g[b++]*e+t,f=g[b++]*e+n,l=g[b++]*e+t,d=g[b++]*e+n,_=g[b++]*e+t,y=g[b++]*e+n,r.bezierCurveTo(l,d,_,y,u,f);break}}return{offsetX:i.ha*e,path:r}}class mn extends Gs{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const s=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(s,t)}this.type="TextGeometry"}}let Ne="light",De=null,At=null,se=null,ie=null,$e,so=window.matchMedia("(max-width: 992px)").matches,io=document.querySelector(".experience-canvas");const oo=document.getElementById("loader-wrapper");let ro=["fan_rotation","fan_rotation.001","fan_rotation.002","fan_rotation.003","fan_rotation.004"],ue=[{image:"textures/resume.jpeg",url:"https://jarvasjdk.github.io/resume/"},{image:"textures/bug-tracking.png",url:"https://github.com/Jarvasjdk/Bug_Management_Tracker"}],Pn={x:.12,y:.2,z:.55},In={x:-1.54,y:.13,z:1.41},Dn={x:1,y:.45,z:.01},Fn={x:.05,y:.05,z:0};const N=new Vs,G=new xn(75,window.innerWidth/window.innerHeight,.01,1e3);let Ge={x:1.009028643133046,y:.5463638814987481,z:.4983449671971262},ao={x:-.8313297556598935,y:.9383399492446749,z:.7240714481613063};G.position.set(Ge.x,Ge.y,Ge.z);const he=new zs({canvas:io,antialias:!0});he.setSize(window.innerWidth,window.innerHeight);he.setPixelRatio(window.devicePixelRatio);he.shadowMap.enabled=!0;he.shadowMap.type=Ks;const V=new yi(G,he.domElement);V.enablePan=!1;V.minDistance=.9;V.maxDistance=1.6;V.minAzimuthAngle=.2;V.maxAzimuthAngle=Math.PI*.78;V.minPolarAngle=.3;V.maxPolarAngle=Math.PI/2;V.update();const Hn=new Ji;Hn.setDecoderPath("draco/");const Bn=new wi;Bn.setDRACOLoader(Hn);Bn.load("models/room.glb",function(o){oo.style.display="none";const e=document.createElement("video");e.src="textures/arcane.mp4",e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.loop=!0;const t=new Xs(e);t.minFilter=_t,t.magFilter=_t,t.generateMipmaps=!1,t.encoding=xe,o.scene.children.forEach(s=>{if(s.name!=="Wall"&&(s.castShadow=!0),s.receiveShadow=!0,s.children&&s.children.forEach(i=>{if(i.name!=="Book001"&&i.name!=="Switch"&&(i.castShadow=!0),i.name==="Book001"){const r=new ze().load("textures/book-cover.png");r.flipY=!1,i.material=new Ke({side:wn,color:16777215,map:r})}i.receiveShadow=!0}),s.name==="Stand"&&(s.children[0].material=new le({map:t}),e.play()),s.name==="CPU"&&(s.children[0].material=new Z,s.children[0].material.roughness=0,s.children[0].material.color.set(10066329),s.children[0].material.ior=3,s.children[0].material.transmission=2,s.children[0].material.opacity=.8,s.children[0].material.depthWrite=!1,s.children[0].material.depthTest=!1,s.children[1].material=new Z,s.children[1].material.roughness=0,s.children[1].material.color.set(10066329),s.children[1].material.ior=3,s.children[1].material.transmission=1,s.children[1].material.opacity=.8,s.children[1].material.depthWrite=!1,s.children[1].material.depthTest=!1),s.name==="Book"){De=s.children[0];const i=new ze().load("textures/book-inner.png");i.flipY=!1,s.material=new Ke({color:16777215,map:i})}s.name==="SwitchBoard"&&(At=s.children[0])}),N.add(o.scene),zn(),$e=new Ys(o.scene);const n=o.animations;ro.forEach(s=>{const i=vn.findByName(n,s);i&&$e.clipAction(i).play()}),lo(),po(),mo(),_o(),go(),bo(o.scene)},function(o){console.error(o)});const Re=new Ws(16777215,.6);N.add(Re);const F=new X(16777215,2.5,10);F.position.set(.3,2,.5);F.castShadow=!0;F.shadow.radius=5;F.shadow.mapSize.width=2048;F.shadow.mapSize.height=2048;F.shadow.camera.far=2.5;F.shadow.bias=-.002;N.add(F);const Un=new X(16711680,30,.2),jn=new X(65280,30,.12),Gn=new X(65280,30,.2),Vn=new X(65280,30,.2),Je=new X(65280,30,.05);Un.position.set(0,.29,-.29);jn.position.set(-.15,.29,-.29);Gn.position.set(.21,.29,-.29);Vn.position.set(.21,.19,-.29);Je.position.set(.21,.08,-.29);N.add(Un);N.add(jn);N.add(Gn);N.add(Vn);N.add(Je);const Qe=new X(16711680,0,1.1),Ze=new X(16711680,0,1.1),et=new X(16711680,0,1.1),tt=new X(16711680,0,1.1);Qe.position.set(-.2,.6,.24);Ze.position.set(-.2,.6,.42);et.position.set(-.2,.6,.01);tt.position.set(-.2,.6,-.14);N.add(Qe);N.add(Ze);N.add(et);N.add(tt);const co=new Js;function zn(){requestAnimationFrame(zn),$e&&$e.update(co.getDelta()),he.render(N,G)}function lo(){const o=new Zi;o.load("fonts/unione.json",function(e){const t=[new Be({color:1515303,flatShading:!0}),new Be({color:16777215})],n=new mn("NATHAN DAVIS",{font:e,size:.08,height:.01});se=new Xe(n,t),se.rotation.y=Math.PI*.5,se.position.set(-.27,.55,.5),N.add(se)}),o.load("fonts/helvatica.json",function(e){const t=[new Be({color:1515303,flatShading:!0}),new Be({color:16777215})],n=new mn("Web Designer / Developer",{font:e,size:.018,height:0});ie=new Xe(n,t),ie.rotation.y=Math.PI*.5,ie.position.set(-.255,.5,.5),N.add(ie)})}function uo(o){o==="dark"?(At.rotation.z=Math.PI/7,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),x.to(F.color,{r:.2725490196078431,g:.23137254901960785,b:.6862745098039216}),x.to(Re.color,{r:.17254901960784313,g:.23137254901960785,b:.6862745098039216}),x.to(F,{intensity:1.5}),x.to(Re,{intensity:.3}),x.to(Je,{distance:.07}),x.to(se.material[0].color,{r:8,g:8,b:8,duration:0}),x.to(se.material[1].color,{r:5,g:5,b:5,duration:0}),x.to(ie.material[0].color,{r:8,g:8,b:8,duration:0}),x.to(ie.material[1].color,{r:5,g:5,b:5,duration:0}),x.to(Qe,{intensity:.6}),x.to(Ze,{intensity:.6}),x.to(et,{intensity:.6}),x.to(tt,{intensity:.6})):(At.rotation.z=0,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),x.to(F.color,{r:1,g:1,b:1}),x.to(Re.color,{r:1,g:1,b:1}),x.to(F,{intensity:2.5}),x.to(Re,{intensity:.6}),x.to(Je,{distance:.05}),x.to(se.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),x.to(se.material[1].color,{r:1,g:1,b:1,duration:0}),x.to(ie.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),x.to(ie.material[1].color,{r:1,g:1,b:1,duration:0}),x.to(Qe,{intensity:0}),x.to(Ze,{intensity:0}),x.to(et,{intensity:0}),x.to(tt,{intensity:0}))}function fo(){V.enabled=!0}function Ot(){V.enabled=!1}function kt(){document.getElementById("close-btn").style.display="block"}function ho(){document.getElementById("close-btn").style.display="none"}function Kn(){De&&x.to(De.rotation,{x:0,duration:1.5})}function Xn(){ue.length!==0&&ue.forEach((o,e)=>{x.to(o.mesh.material,{opacity:0,duration:1}),x.to(o.mesh.position,{y:o.y,duration:1}),x.to(o.mesh.scale,{x:0,y:0,z:0,duration:0,delay:1})})}function Yn(){Kn(),Xn(),ho(),x.to(G.position,{...Ge,duration:1.5}),x.to(G.rotation,{...ao,duration:1.5}),x.delayedCall(1.5,fo),Ne!=="dark"&&x.to(F,{intensity:2.5,duration:1.5})}function po(){document.getElementById("logo").addEventListener("click",function(o){o.preventDefault(),Yn()})}function Wn(){De&&(x.to(G.position,{...Pn,duration:1.5}),x.to(G.rotation,{...In,duration:1.5}),x.to(De.rotation,{x:Math.PI,duration:1.5,delay:1.5}),Ne!=="dark"&&x.to(F,{intensity:1,duration:1.5}))}function mo(){document.getElementById("about-menu").addEventListener("click",function(o){o.preventDefault(),Ot(),Xn(),Wn(),x.delayedCall(1.5,kt)})}function _o(){ue.forEach((o,e)=>{const t=e%3===0?0:1,n=Math.floor(e/3),s=new qs(.71,.4),i=new le({color:16777215,map:new ze().load(o.image),transparent:!0,opacity:0}),r=new Xe(s,i);r.name="project",r.userData={url:o.url},r.position.set(.3+e*.8*t,1-n*.5,-1.15),r.scale.set(0,0,0),ue[e].mesh=r,ue[e].y=1-n*.5,N.add(r)}),document.getElementById("projects-menu").addEventListener("click",function(o){o.preventDefault(),Ot(),Kn(),x.to(G.position,{...Dn,duration:1.5}),x.to(G.rotation,{...Fn,duration:1.5}),x.delayedCall(1.5,kt),ue.forEach((e,t)=>{e.mesh.scale.set(1,1,1),x.to(e.mesh.material,{opacity:1,duration:1.5,delay:1.5+t*.1}),x.to(e.mesh.position,{y:e.y+.05,duration:1,delay:1.5+t*.1})})})}function go(){const o=new B,e=new $s;let t;window.addEventListener("click",function(n){const s=Ne==="light"?"dark":"light",i=document.getElementById("close-btn"),r=document.getElementById("projects-menu");if(n.target===i||i.contains(n.target)||n.target===r||r.contains(n.target))return!1;o.x=n.clientX/window.innerWidth*2-1,o.y=-(n.clientY/window.innerHeight)*2+1,e.setFromCamera(o,G),t=e.intersectObjects(N.children),t.forEach(a=>{a.object.name==="project"&&a.object.userData.url&&window.open(a.object.userData.url),(a.object.name==="Book"||a.object.name==="Book001")&&(Ot(),Wn(),x.delayedCall(1.5,kt)),(a.object.name==="SwitchBoard"||a.object.name==="Switch")&&(Ne=s,uo(Ne))})})}function bo(o){so&&(o.scale.set(.95,.95,.95),Pn={x:.09,y:.23,z:.51},In={x:-1.57,y:0,z:1.57},Dn={x:1.1,y:.82,z:.5},Fn={x:0,y:0,z:1.55},ue.forEach((e,t)=>{e.mesh.position.z=-1.13}),V.maxDistance=1.5,V.maxAzimuthAngle=Math.PI*.75)}document.getElementById("close-btn").addEventListener("click",o=>{o.preventDefault(),Yn()});document.getElementById("contact-btn").addEventListener("click",o=>{o.preventDefault(),document.querySelector(".contact-menu__dropdown").classList.toggle("contact-menu__dropdown--open")});document.addEventListener("mouseup",o=>{const e=document.querySelector(".contact-menu");e.contains(o.target)||e.querySelector(".contact-menu__dropdown").classList.remove("contact-menu__dropdown--open")});window.addEventListener("resize",()=>{G.aspect=window.innerWidth/window.innerHeight,G.updateProjectionMatrix(),he.setSize(window.innerWidth,window.innerHeight)});
